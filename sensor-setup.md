# 如何添加Sensor

## Telemetry 模組配置說明

Telemetry 模組提供三種類型的數據通過網絡發送：來自 Meshtastic 設備的設備指標（電池電量、電壓、頻道利用率和空中時間）、來自附加 I2C 感應器的環境指標，以及來自附加 I2C 顆粒感應器的空氣質量指標。

連接到設備 I2C 總線的支援感應器會在啟動時自動偵測。環境監測和空氣質量功能必須啟用，才能將感應器的讀數發送到網絡上。

### 當前支援的感應器類型
| 感應器          | I2C 地址        | 數據點                                   |
|-----------------|-----------------|------------------------------------------|
| BMP085          | 0x76, 0x77      | 溫度和氣壓                                |
| BMP180          | 0x76, 0x77      | 溫度和氣壓                                |
| BMP280          | 0x76, 0x77      | 溫度和氣壓                                |
| BME280          | 0x76, 0x77      | 溫度、氣壓和濕度                          |
| BME680          | 0x76, 0x77      | 溫度、氣壓、濕度和氣體阻力                |
| MCP9808         | 0x18            | 溫度                                     |
| INA260          | 0x40, 0x41, 0x43| 電流和電壓                                |
| INA219          | 0x40, 0x41, 0x43| 電流和電壓                                |
| INA3221         | 0x42            | 三通道電流和電壓                          |
| LPS22           | 0x5D, 0x5C      | 氣壓                                     |
| SHTC3           | 0x70            | 溫度和濕度                                |
| SHT31           | 0x44            | 溫度和濕度                                |
| PMSA003I        | 0x12            | 按大小的濃度單位和按大小的顆粒數量        |
| DFROBOT_LARK    | 0x42            | 溫度、氣壓、濕度、風向、風速              |

### 模組配置值
- **啟用環境監測**: 啟用或禁用環境監測（感應器）。
- **環境指標更新間隔**: 設定環境（感應器）指標在網絡上發送的頻率，單位為秒。預設為 1800 秒（30 分鐘）。
- **設備指標更新間隔**: 設定設備指標在網絡上發送的頻率，單位為秒。預設為 1800 秒（30 分鐘）。設備指標會每分鐘發送一次，無論這個設置如何。
- **環境顯示啟用**: 在設備顯示器上顯示環境監測數據。預設為 false。
- **顯示華氏溫度**: 感應器始終讀取為攝氏溫度，但用戶可以選擇在設備顯示器上顯示華氏溫度。預設為 false。
- **空氣質量啟用**: 啟用或禁用將空氣質量指標從附加支援感應器發送到網絡。預設為 false。
- **空氣質量間隔**: 設定發送空氣質量指標的間隔時間，單位為秒。預設為 1800 秒（30 分鐘）。

### Telemetry 配置 CLI 可用性
- **Android**: 支援
- **Apple**: 支援
- **CLI**: 支援
- **Web**: 支援

### CLI 指令範例
所有 telemetry 模組配置選項在 python CLI 中均可用。以下是指令範例：

- 設定更新間隔（預設 0 為 30 分鐘 (1800 秒)）
  ```bash
  meshtastic --set telemetry.device_update_interval 0
  meshtastic --set telemetry.environment_update_interval 120



Meshtastic 的 Detection Sensor 模組允許您利用 GPIO 針腳來監控特定的高/低狀態，並在檢測到事件時通過網絡發送文本警報。這個模組非常適合集成運動檢測傳感器、簧片開關和其他二元狀態系統到您的網絡中，根據需要提供通知。

## 所需固件版本
確保您的設備運行在固件版本 2.2.2 或更高版本以使用此模組。

## 配置選項
- 啟用: 切換以啟用或禁用模組。

- 最小廣播間隔: 指定當檢測到狀態變化時，向網絡發送消息的最小間隔時間，單位為秒。

- 狀態廣播間隔: 定義模組應多久向網絡廣播當前狀態一次，單位為秒。設置為 0 時，只有在狀態改變時才會廣播，作為一種狀態心跳功能，以增加心理安慰。

- 發送鈴聲: 發送 ASCII 鈴聲字符與警報消息。適用於觸發外部通知。

- 友好名稱: 用於格式化發送到網絡的消息。例如：名稱 "Motion" 將產生 "Motion detected" 的消息。名稱最大長度為 20 個字符。

- 監控針腳: 監控狀態變化的 GPIO 針腳。

- 觸發高電平檢測: 設定 GPIO 針腳狀態檢測是在高電平 (1) 觸發還是低電平 (0)。

- 使用上拉電阻: 是否使用 INPUT_PULLUP 模式的 GPIO 針腳。僅適用於板子在該針腳使用上拉電阻的情況